# Setup

## Hassio Add-on

If you have Hassio, you can install the app via the community add-ons repo.

Find the docs [here](https://github.com/hassio-addons/addon-home-panel#readme)

## Docker Compose

---

- Install [Docker](https://www.docker.com/community-edition) and
 [Docker Compose](https://docs.docker.com/compose/install/)
- Create a directory for your compose file. For example, `home-panel`
- Create a `docker-compose.yml` file:

### SSL

!!! info ""
    This example maps the `ssl` directory in the home directory.
    Inside this directory are two files `fullchain.pem` and `privkey.pem`
    which are files generated by [Let's Encrypt](https://letsencrypt.org/).
    Change the environment variables to your own Home Assistant details

```yaml
---
version: '3'

services:
  home-panel:
    image: timmo001/home-panel
    environment:
      SSL_CERTFILE: fullchain.pem
      SSL_KEYFILE: privkey.pem
    ports:
      - 8234:8234
    volumes:
      - ~/ssl/fullchain.pem:/data/ssl/fullchain.pem
      - ~/ssl/privkey.pem:/data/ssl/privkey.pem
```

### Non-SSL

!!! warning ""
    This example shows how to set up the app without ssl. This is useful for
     testing, but is **unsecure**, so don't expose the app to the outside
     world.

```yaml
---
version: '3'

services:
  home-panel:
    image: timmo001/home-panel
    ports:
      - 8234:8234
    volumes:
      - ~/ssl/fullchain.pem:/data/ssl/fullchain.pem
      - ~/ssl/privkey.pem:/data/ssl/privkey.pem
```

## Docker

---

- Install [Docker](https://www.docker.com/community-edition)
- Run image

### SSL

!!! info ""
    This example maps the `ssl` directory in the home directory.
    Inside this directory are two files `fullchain.pem` and `privkey.pem`
    which are files generated by [Let's Encrypt](https://letsencrypt.org/).
    Change the environment variables to your own Home Assistant details

```bash
docker run -d \
  -p 8234:8234 \
  -v ~/ssl/fullchain.pem:/data/ssl/fullchain.pem
  -v ~/ssl/privkey.pem:/data/ssl/privkey.pem
  -e SSL_CERTFILE=fullchain.pem \
  -e SSL_KEYFILE=privkey.pem \
  timmo001/home-panel
```

### Non-SSL

!!! warning ""
    This example shows how to set up the app without ssl. This is useful for
     testing, but is **unsecure**, so don't expose the app to the outside
     world.

```bash
docker run -d \
  -p 8234:8234 \
  timmo001/home-panel
```

## Node JS

---

### API Setup

- First clone the
  [Home Assistant API](https://github.com/timmo001/home-panel-api) repository
- Checkout the version you want via releases
- Install packages

```bash
yarn install
```

- Run

```bash
node index.js
```

### Webapp

- Clone this repository
- Checkout the version you want via releases
- Install packages

```bash
yarn install
```

#### Production - SSL

- Build a production version

```bash
yarn build
```

- Install nginx
- Edit your server config `/etc/nginx/conf.d/default.conf`

```conf
server {
  listen 443 ssl http2 default_server;
  listen [::]:443 ssl http2 default_server;

  root /usr/share/nginx/html;
  index index.html;
  server_name 172.0.0.1;

  ssl_certificate /ssl/fullchain.pem;
  ssl_certificate_key /ssl/privkey.pem;

  location / {
    try_files $uri /index.html;
  }
}
```

- Copy the files in the build folder into nginx's html directory at
 `/usr/share/nginx/html`
- Start your server

```bash
nginx -g "daemon off;"
```

#### Production - Non-SSL

!!! warning ""
    **This option is not secure. Do not open to the outside world!**

- Build a production version

```bash
yarn build
```

- Install nginx
- Edit your server config `/etc/nginx/conf.d/default.conf`

```conf
server {
  listen 80 default_server;
  listen [::]:80 default_server;
  root /usr/share/nginx/html;
  index index.html;
  server_name 172.0.0.1;
  location / {
    try_files \$uri /index.html;
  }
}
```

- Copy the files in the build folder into nginx's html directory at
 `/usr/share/nginx/html`
- Start your server

```bash
nginx -g "daemon off;"
```

#### Development

!!! warning ""
    **This option is not secure. Do not open to the outside world!**

- Run the app

```bash
yarn start
```

- The app should open in your default browser under [http://localhost:3000](http://localhost:3000)
